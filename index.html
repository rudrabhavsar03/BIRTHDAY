<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Shyamal! ğŸ‚</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 1s ease-out; }
        body { margin: 0; padding: 0; overflow-x: hidden; }
    </style>
</head>

<body>
<div id="app"></div>

<script>
/* =======================
   CONFIG
======================= */
const TEST_MODE = false; // ğŸ‘‰ set true to test in 5 seconds

const targetDate = TEST_MODE
    ? new Date(Date.now() + 5000)
    : new Date('2025-12-27T00:00:00-05:00');

const photos = [
    'IMG-20250224-WA0018.jpg',
    'IMG-20250418-WA0028.jpg',
    'IMG-20250418-WA0065.jpg',
    'IMG-20250527-WA0167.jpg',
    'IMG-20250711-WA0036.jpg',
    'IMG-20250717-WA0059.jpg',
    'IMG-20250805-WA0015.jpg',
    'IMG-20250905-WA0017.jpg',
];

/* =======================
   STATE
======================= */
let currentPage = 'countdown';
let isBirthday = false;
let showFinalMessage = false;
let answer = '';
let error = '';

/* =======================
   TIME
======================= */
function getTimeLeft() {
    const diff = targetDate - new Date();
    if (diff <= 0) return { days: 0, hours: 0, minutes: 0, seconds: 0 };

    return {
        days: Math.floor(diff / 86400000),
        hours: Math.floor((diff / 3600000) % 24),
        minutes: Math.floor((diff / 60000) % 60),
        seconds: Math.floor((diff / 1000) % 60)
    };
}

/* =======================
   RENDER
======================= */
function render() {
    const app = document.getElementById('app');

    /* COUNTDOWN */
    if (currentPage === 'countdown' && !isBirthday) {
        const t = getTimeLeft();
        app.innerHTML = `
        <div class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-blue-400 flex items-center justify-center">
            <div class="text-center">
                <h1 class="text-6xl font-bold text-white mb-10">Something Special Is Coming âœ¨</h1>
                <div class="grid grid-cols-4 gap-6">
                    ${['days','hours','minutes','seconds'].map((l,i)=>`
                        <div>
                            <div class="bg-white/30 rounded-2xl p-6 text-5xl font-bold text-white">
                                ${Object.values(t)[i]}
                            </div>
                            <div class="text-white mt-2 uppercase">${l}</div>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>`;
        return;
    }

    /* BIRTHDAY LANDING */
    if (currentPage === 'countdown' && isBirthday) {
        app.innerHTML = `
        <div class="min-h-screen bg-gradient-to-br from-yellow-300 via-pink-300 to-purple-400 flex items-center justify-center">
            <div class="bg-white/30 p-16 rounded-3xl text-center shadow-2xl">
                <h1 class="text-7xl font-black text-white mb-6 animate-pulse">ğŸ‚ HAPPY BIRTHDAY ğŸ‚</h1>
                <p class="text-3xl text-white mb-10">Your day is finally here âœ¨</p>
                <button onclick="startAdventure()"
                    class="bg-white px-10 py-4 rounded-full text-xl font-bold text-purple-600 hover:scale-105 transition">
                    Letâ€™s Begin ğŸ
                </button>
            </div>
        </div>`;
        return;
    }

    /* QUESTION 1 */
    if (currentPage === 'question1') {
        app.innerHTML = questionTemplate(
            'ğŸ® First Challenge!',
            'What did you wear on your last birthday?',
            'Think about the color and what you wore on top ğŸ‘•'
        );
        setupInput();
        return;
    }

    /* PHOTOS + QUESTION 2 */
    if (currentPage === 'photos') {
        renderPhotos();
        return;
    }

    /* LETTER */
    if (currentPage === 'letter') {
        renderLetter();
        return;
    }

    /* FINAL */
    if (currentPage === 'final') {
        renderFinal();
    }
}

/* =======================
   TEMPLATES
======================= */
function questionTemplate(title, question, hint) {
    return `
    <div class="min-h-screen bg-gradient-to-br from-blue-400 via-purple-400 to-pink-400 flex items-center justify-center p-6">
        <div class="bg-white rounded-3xl p-10 w-full max-w-xl shadow-2xl">
            <h2 class="text-4xl font-bold text-purple-600 mb-4 text-center">${title}</h2>
            <p class="text-xl text-center mb-6">${question}</p>
            <input id="answerInput" class="w-full p-4 border-2 rounded-xl mb-4" placeholder="Your answer...">
            ${error ? `<div class="text-red-600 mb-4">${error}</div>` : ''}
            <button onclick="submitAnswer()"
                class="w-full bg-purple-500 text-white py-4 rounded-xl font-bold">
                Submit âœ¨
            </button>
            <p class="text-sm text-center mt-4 text-gray-600">ğŸ’¡ ${hint}</p>
        </div>
    </div>`;
}

/* =======================
   ACTIONS
======================= */
function startAdventure() {
    currentPage = 'question1';
    render();
}

function submitAnswer() {
    const val = document.getElementById('answerInput')?.value.toLowerCase().trim();
    error = '';

    if (currentPage === 'question1') {
        if (val === 'red shirt' || val === 'redshirt') {
            currentPage = 'photos';
        } else error = 'Not quite! ğŸ‘•';
    }

    else if (currentPage === 'photos') {
        if (val === 'sev usal' || val === 'sevusal') {
            currentPage = 'letter';
        } else error = 'Think spicy ğŸŒ¶ï¸';
    }

    else if (currentPage === 'letter') {
        if (val.includes('april 10') || val.includes('10 april')) {
            currentPage = 'final';
            setTimeout(() => showFinalMessage = true, 500);
        } else error = 'Think April ğŸ’';
    }

    render();
}

/* =======================
   PAGES
======================= */
function renderPhotos() {
    document.getElementById('app').innerHTML = `
    <div class="min-h-screen bg-gradient-to-br from-pink-300 to-purple-400 p-10">
        <h1 class="text-6xl text-white font-black text-center mb-10">Our Memory Lane ğŸ“¸</h1>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
            ${photos.map(p => `<img src="${p}" class="rounded-3xl shadow-xl">`).join('')}
        </div>
        ${questionTemplate(
            'ğŸ½ï¸ Second Challenge!',
            'Whatâ€™s your favourite food?',
            'Itâ€™s spicy ğŸŒ¶ï¸'
        )}
    </div>`;
    setupInput();
}

function renderLetter() {
    document.getElementById('app').innerHTML = `
    <div class="min-h-screen bg-gradient-to-br from-rose-100 to-purple-200 p-10">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl p-10 shadow-2xl">
            <h1 class="text-5xl font-black mb-6 text-center">A Letter For You ğŸ’Œ</h1>
            <p class="leading-relaxed text-lg">Dear Shyamal... (your letter stays untouched â¤ï¸)</p>
        </div>
        ${questionTemplate(
            'ğŸ“… Final Challenge!',
            'Specialest day in US?',
            'A date in April ğŸ’•'
        )}
    </div>`;
    setupInput();
}

function renderFinal() {
    document.getElementById('app').innerHTML = `
    <div class="min-h-screen bg-gradient-to-br from-pink-300 to-purple-400 flex items-center justify-center">
        ${showFinalMessage ? `
        <div class="bg-white/40 p-12 rounded-3xl text-center animate-fade-in">
            <h1 class="text-6xl font-black mb-6">ğŸ‰ You Made It ğŸ‰</h1>
            <p class="text-2xl">Happiest Birthday Love ğŸ’–</p>
        </div>` : ''}
    </div>`;
}

/* =======================
   INPUT
======================= */
function setupInput() {
    const i = document.getElementById('answerInput');
    if (!i) return;
    i.focus();
    i.onkeypress = e => e.key === 'Enter' && submitAnswer();
}

/* =======================
   TIMER
======================= */
setInterval(() => {
    if (currentPage === 'countdown') {
        isBirthday = new Date() >= targetDate;
        render();
    }
}, 1000);

render();
</script>
</body>
</html>
